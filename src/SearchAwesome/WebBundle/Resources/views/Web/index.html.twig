{% extends "SearchAwesomeWebBundle::layout.html.twig" %}

{% block styles %}
    {#{% stylesheets output='compiled/css/app.css' filter='cssrewrite' debug=false#}
    {#%}#}
    {#<link rel="stylesheet" type="text/css" href="{{ asset_url }}" />#}
    {#{% endstylesheets %}#}
{% endblock styles %}

{% block body %}
    {% raw %}
    <div ui-view></div>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" data-ng-controller="NavController as nav">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a ui-sref="icons" class="navbar-brand">SearchAwesome</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li data-ng-class="{ 'active':nav.selectedTab('icons') }">
                        <a ui-sref="icons">Icons</a>
                    </li>
                    <li data-ng-class="{ 'active':nav.selectedTab('tags') }">
                        <a ui-sref="tags">Tags</a>
                    </li>
                    <li data-ng-class="{ 'active':nav.selectedTab('admin') }">
                        <a ui-sref="admin">Admin</a>
                    </li>
                    <li data-ng-class="{ 'active':nav.selectedTab('login') }">
                        <a ui-sref="login">Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    {% endraw %}
{% endblock body %}

{% block scripts %}
    {{ parent() }}

    {% if app.request.locale != 'en' %}
    <script type="text/javascript" defer="defer" src="{{ asset('bower/moment/lang/' ~ app.request.locale ~ '.js') }}"></script>
    {% endif %}
    {% javascripts output='compiled/js/app.js' debug=false
    'bower/jquery/jquery.js'
    'bower/moment/min/moment-with-langs.js'
    'bower/angular/angular.js'
    'bower/angular-bootstrap/ui-bootstrap-tpls.js'
    'bower/angular-resource/angular-resource.js'
    'bower/angular-route/angular-route.js'
    'bower/angular-mocks/angular-mocks.js'
    'bower/angular-animate/angular-animate.js'
    'bower/angular-ui-router/release/angular-ui-router.js'
    'bower/angular-ui-utils/event.js'
    'bower/angular-recaptcha/release/angular-recaptcha.js'
    '@SearchAwesomeWebBundle/Resources/public/js/app.js'
    '@SearchAwesomeWebBundle/Resources/public/js/directives/helpers.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/icon.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/iconList.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/tagList.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/site.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/tag.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/session.js'
    '@SearchAwesomeWebBundle/Resources/public/js/services/auth.js'
    '@SearchAwesomeWebBundle/Resources/public/js/controllers/nav.js'
    '@SearchAwesomeWebBundle/Resources/public/js/controllers/login.js'
    '@SearchAwesomeWebBundle/Resources/public/js/controllers/icons.js'
    '@SearchAwesomeWebBundle/Resources/public/js/controllers/tags.js'
    '@SearchAwesomeWebBundle/Resources/public/js/controllers/admin.js'
    %}
    <script src="{{ asset_url }}" type="text/javascript" defer="defer"></script>
    {% endjavascripts %}

    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') == false and app.request.session.get('_recaptcha_valid') != true %}
        <script type="text/javascript">
            window.RECAPTCHA_PUBLIC_KEY = '{{ recaptcha_public_key }}';
        </script>
    {% endif %}
    <script type="text/javascript" src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>

{% endblock scripts %}